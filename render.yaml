services:
  # ===========================================================
  # ðŸ•’ CRON TASKS â€” U.S. Eastern Time Adjusted (EDT = UTC+4)
  # All tasks call run_scan_v5.py
  # ===========================================================

  - type: cron
    name: "0700-premarket-prep"
    runtime: python
    buildCommand: "pip install -q requests pandas numpy || true"
    startCommand: "python run_scan_v5.py --task premarket_prep"
    schedule: "0 12 * * *"  # 07:00 EST
    envVars:
      - key: TWELVE_KEY
        sync: false
      - key: FINNHUB_KEY
        sync: false
      - key: WEBHOOK_URL
        sync: false

  - type: cron
    name: "0715-volatility-scan"
    runtime: python
    buildCommand: "pip install -q requests pandas numpy || true"
    startCommand: "python run_scan_v5.py --task volatility_scan"
    schedule: "15 12 * * *"  # 07:15 EST
    envVars:
      - key: TWELVE_KEY
        sync: false
      - key: FINNHUB_KEY
        sync: false
      - key: WEBHOOK_URL
        sync: false

  - type: cron
    name: "0815-signal-pass"
    runtime: python
    buildCommand: "pip install -q requests pandas numpy || true"
    startCommand: "python run_scan_v5.py --task signal_pass"
    schedule: "15 13 * * *"  # 08:15 EST
    envVars:
      - key: TWELVE_KEY
        sync: false
      - key: FINNHUB_KEY
        sync: false
      - key: WEBHOOK_URL
        sync: false

  - type: cron
    name: "0900-holdings-monitor"
    runtime: python
    buildCommand: "pip install -q requests pandas numpy || true"
    startCommand: "python run_scan_v5.py --task holdings_monitor"
    schedule: "0 14 * * *"  # 09:00 EST
    envVars:
      - key: TWELVE_KEY
        sync: false
      - key: FINNHUB_KEY
        sync: false
      - key: WEBHOOK_URL
        sync: false

  - type: cron
    name: "0930-market-open"
    runtime: python
    buildCommand: "pip install -q requests pandas numpy || true"
    startCommand: "python run_scan_v5.py --task market_open"
    schedule: "30 14 * * *"  # 09:30 EST
    envVars:
      - key: TWELVE_KEY
        sync: false
      - key: FINNHUB_KEY
        sync: false
      - key: WEBHOOK_URL
        sync: false

  - type: cron
    name: "1030-stop-health"
    runtime: python
    buildCommand: "pip install -q requests pandas numpy || true"
    startCommand: "python run_scan_v5.py --task stop_health"
    schedule: "30 15 * * *"  # 10:30 EST
    envVars:
      - key: TWELVE_KEY
        sync: false
      - key: FINNHUB_KEY
        sync: false
      - key: WEBHOOK_URL
        sync: false

  - type: cron
    name: "1200-midday-refresh"
    runtime: python
    buildCommand: "pip install -q requests pandas numpy || true"
    startCommand: "python run_scan_v5.py --task midday_refresh"
    schedule: "0 17 * * *"  # 12:00 EST
    envVars:
      - key: TWELVE_KEY
        sync: false
      - key: FINNHUB_KEY
        sync: false
      - key: WEBHOOK_URL
        sync: false

  - type: cron
    name: "1330-sentiment-check"
    runtime: python
    buildCommand: "pip install -q requests pandas numpy || true"
    startCommand: "python run_scan_v5.py --task sentiment_check"
    schedule: "30 18 * * *"  # 13:30 EST
    envVars:
      - key: TWELVE_KEY
        sync: false
      - key: FINNHUB_KEY
        sync: false
      - key: WEBHOOK_URL
        sync: false

  - type: cron
    name: "1530-powerhour-review"
    runtime: python
    buildCommand: "pip install -q requests pandas numpy || true"
    startCommand: "python run_scan_v5.py --task powerhour_review"
    schedule: "30 20 * * *"  # 15:30 EST
    envVars:
      - key: TWELVE_KEY
        sync: false
      - key: FINNHUB_KEY
        sync: false
      - key: WEBHOOK_URL
        sync: false

  - type: cron
    name: "1615-eod-recap"
    runtime: python
    buildCommand: "pip install -q requests pandas numpy || true"
    startCommand: "python run_scan_v5.py --task recap_log"
    schedule: "15 21 * * *"  # 16:15 EST
    envVars:
      - key: TWELVE_KEY
        sync: false
      - key: FINNHUB_KEY
        sync: false
      - key: WEBHOOK_URL
        sync: false

  - type: cron
    name: "hourly-holdings-continuous"
    runtime: python
    buildCommand: "pip install -q requests pandas numpy || true"
    startCommand: "python run_scan_v5.py --task holdings_continuous"
    schedule: "0 * * * *"  # Every hour UTC
    envVars:
      - key: TWELVE_KEY
        sync: false
      - key: FINNHUB_KEY
        sync: false
      - key: WEBHOOK_URL
        sync: false

  - type: cron
    name: "fri1700-portfolio-review"
    runtime: python
    buildCommand: "pip install -q requests pandas numpy || true"
    startCommand: "python run_scan_v5.py --task portfolio_review"
    schedule: "0 22 * * FRI"  # 17:00 EST
    envVars:
      - key: TWELVE_KEY
        sync: false
      - key: FINNHUB_KEY
        sync: false
      - key: WEBHOOK_URL
        sync: false
