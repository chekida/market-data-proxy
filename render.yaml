# render.yaml
# ------------------------------------------------------------
# Twelve Data Automated Scanner Deployment Configuration
# This file defines a service and cron jobs for your Render app.
# Place it at the root of your repo.

services:
  - type: cron
    name: twelve-data-scanner
    env: python
    buildCommand: "pip install -r requirements.txt"
    startCommand: "python run_scan.py --task breakout"
    envVars:
      - key: TWELVE_DATA_API_KEY
        sync: false   # Set manually in Render Dashboard under Environment Variables

cronJobs:
  - name: premarket-health-check
    schedule: "45 11 * * 1-5"    # 7:45 AM EST
    command: "python run_scan.py --task premarket"
  - name: market-regime-scan
    schedule: "15 13 * * 1-5"    # 9:15 AM EST
    command: "python run_scan.py --task regime"
  - name: open-range-breakout
    schedule: "30 13 * * 1-5"    # 9:30 AM EST
    command: "python run_scan.py --task breakout"
  - name: sector-rs-update
    schedule: "30 14 * * 1-5"    # 10:30 AM EST
    command: "python run_scan.py --task sector_rs"
  - name: top25-live-signal-scan
    schedule: "45 14 * * 1-5"    # 10:45 AM EST
    command: "python run_scan.py --task top25"
  - name: midday-recheck
    schedule: "0 16 * * 1-5"     # 12:00 PM EST
    command: "python run_scan.py --task midday"
  - name: afternoon-refresh
    schedule: "30 18 * * 1-5"    # 2:30 PM EST
    command: "python run_scan.py --task refresh"
  - name: closing-scan
    schedule: "45 19 * * 1-5"    # 3:45 PM EST
    command: "python run_scan.py --task closing"
  - name: atr-risk-update
    schedule: "10 20 * * 1-5"    # 4:10 PM EST
    command: "python run_scan.py --task atr"
  - name: overnight-data-refresh
    schedule: "0 0 * * 2-6"      # 8:00 PM EST
    command: "python run_scan.py --task overnight"
